# Test configuration for Jira Integration Tests
# This configuration is used when running integration tests with -Dspring.profiles.active=local
#
# SETUP INSTRUCTIONS:
# ====================
# 1. Copy this file or update the values below with your actual Jira configuration
# 2. Set environment variables OR replace default values directly in this file
# 3. For integration tests, set: JIRA_INTEGRATION_TEST_ENABLED=true
# 4. Configure test project details:
#    export JIRA_TEST_INSTANCE=dev
#    export JIRA_TEST_PROJECT_KEY=DEVSTACK
#    export JIRA_TEST_NONEXISTENT_PROJECT_KEY=ZZZNOPE
#
# AUTHENTICATION OPTIONS:
# =======================
# Option 1 (Preferred): Use Bearer Token (Personal Access Token)
#   - Go to Jira → User Settings → Personal Access Tokens
#   - Create a token with READ permissions for Projects
#   - Set bearer-token property
#
# Option 2: Use Basic Authentication
#   - Set username and password properties
#   - Leave bearer-token empty
#
# SECURITY WARNING:
# =================
# DO NOT commit real credentials to version control!
# Use environment variables or external configuration files.

logging:
  level:
    org.opendevstack.apiservice.externalservice.jira: DEBUG
    org.springframework.web.client.RestTemplate: DEBUG

# External Service Configuration for Jira
externalservices:
  jira:
    default-instance: ${JIRA_DEFAULT_INSTANCE:dev}
    instances:
      # Development Jira instance
      dev:
        # Base URL of your Jira server (no trailing slash)
        # Example: https://jira.mycompany.com or http://localhost:8080
        base-url: ${JIRA_DEV_BASE_URL:https://jira.dev.example.com}

        # OPTION 1: Bearer Token (Personal Access Token) - RECOMMENDED
        bearer-token: ${JIRA_DEV_BEARER_TOKEN:}

        # OPTION 2: Basic Authentication (only if bearer-token is not set)
        # Uncomment and configure if not using bearer token:
        # username: ${JIRA_DEV_USERNAME:your-username}
        # password: ${JIRA_DEV_PASSWORD:your-password-or-token}

        # Connection settings
        connection-timeout: 30000  # 30 seconds
        read-timeout: 30000        # 30 seconds

        # SSL/TLS certificate verification
        # WARNING: Only set to true in development environments!
        trust-all-certificates: ${JIRA_DEV_TRUST_ALL:true}

      # Production Jira instance (example)
      prod:
        base-url: ${JIRA_PROD_BASE_URL:https://jira.prod.example.com}
        bearer-token: ${JIRA_PROD_BEARER_TOKEN:}
        # username: ${JIRA_PROD_USERNAME:your-username}
        # password: ${JIRA_PROD_PASSWORD:your-password-or-token}
        connection-timeout: 30000
        read-timeout: 30000
        trust-all-certificates: ${JIRA_PROD_TRUST_ALL:false}

# Example environment variables to set before running integration tests:
# export JIRA_DEFAULT_INSTANCE=dev
# export JIRA_DEV_BASE_URL=https://jira.mycompany.com
# export JIRA_DEV_BEARER_TOKEN=your-personal-access-token
# export JIRA_INTEGRATION_TEST_ENABLED=true
# export JIRA_TEST_INSTANCE=dev
# export JIRA_TEST_PROJECT_KEY=DEVSTACK
# export JIRA_TEST_NONEXISTENT_PROJECT_KEY=ZZZNOPE
#
# Then run: mvn test -pl external-service-jira -Dtest=JiraServiceIntegrationTest